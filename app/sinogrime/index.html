<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sinogrime</title>
    <link rel="stylesheet" href="../styles/vendor.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/single.css">
</head>
<body class="sinogrimeBg">
    <!-- Navigation -->
        <nav>
            <div class="class">
                Class: Grime <span style="color: white;" class="sans-serif">&#10141;</span> <span class="js-component">Type: Sinogrime</span>
            </div>
            
            <div class="actions">
                <ul class="menu">
                    <li data-toggle="tooltip" data-placement="bottom" title="Description"><img src="/images/icons/text.svg" alt="Description"></li>
                    <li class="js-newGenre" data-toggle="tooltip" data-placement="bottom" title="New Genre"><img src="/images/icons/new_genre.svg" alt="New Genre"></li>
                    <li class="js-about js-popup" data-toggle="tooltip" data-placement="bottom" title="About" data-file="aboutpage.png"><img src="/images/icons/about.svg" alt="About"></li>
                    <li class="js-toggleComponents" data-toggle="tooltip" data-placement="bottom" title="Components">
                        <img src="/images/icons/components.svg" alt="Components" style="opacity: .2;">
                    </li>
                </ul>
            </div>
        </nav>
        <div class="scrollDown"><img src="/images/icons/down.svg" alt="scroll down" class="js-down"></div>

        <div class="content listen">
            <div class="playButton js-play" data-file="interlude" data-placement="top" data-toggle="popover" data-content="Wiley - Wot Do U Call It" data-trigger="hover">
                <div class="rotator">
                    <div class="circle"></div>
                </div>
                <img src="/images/icons/play_audio.svg" alt="play">
            </div>
            <h1>Sinogrime</h1>
            <h2><a href="/">Grime</a></h2>
        </div>

        <audio id="player" preload="true">
            <source src="/files/05. Functions on the Low.mp3">
        </audio>
        
        <script src="/scripts/vendor.js"></script>
        <script src="/scripts/plugins.js"></script>

        <script>
            var player = $('#player');
            $('.js-play').click(function(){
                var _self = $(this);
                var file = '/files/'+$(this).data('file')+'.mp3';

                if(player[0].paused){
                    player[0].play();
                    _self.find('img').attr('src', '/images/icons/pause_audio.svg');
                }
                else{
                    player[0].pause();
                    _self.find('img').attr('src', '/images/icons/play_audio.svg');
                }

                player[0].ontimeupdate = function(){
                    var duration = player[0].duration;
                    var currentTime = player[0].currentTime;
                    var progress = currentTime / (duration/100);
                    var rotation = progress * 3.6;
                    _self.find('.rotator').css({ WebkitTransform: 'rotate(' + rotation + 'deg)'});
                }

                player[0].onended = function(){
                    _self.find('img').attr('src', '/images/icons/play_audio.svg');
                }
            });
        </script>
</body>
</html>